# Kafka Server 配置文件

############################# Server Basics #############################
# Broker ID
broker.id={{ kafka_broker_id }}

############################# Socket Server Settings #############################
# 监听地址
listeners=PLAINTEXT://{{ kafka_bind_address }}:{{ kafka_port }}

# 对外公布地址
advertised.listeners=PLAINTEXT://{{ ansible_host }}:{{ kafka_port }}

# 网络线程数
num.network.threads={{ kafka_num_network_threads }}

# I/O 线程数
num.io.threads={{ kafka_num_io_threads }}

# Socket 发送缓冲区
socket.send.buffer.bytes={{ kafka_socket_send_buffer_bytes }}

# Socket 接收缓冲区
socket.receive.buffer.bytes={{ kafka_socket_receive_buffer_bytes }}

# Socket 请求最大字节数
socket.request.max.bytes={{ kafka_socket_request_max_bytes }}

############################# Log Basics #############################
# 日志目录
log.dirs={{ kafka_data_dir }}

# 默认分区数
num.partitions={{ kafka_num_partitions }}

# 每个数据目录的恢复线程数
num.recovery.threads.per.data.dir={{ kafka_num_recovery_threads_per_data_dir }}

############################# Internal Topic Settings #############################
# 内部主题的复制因子（单节点设为1）
offsets.topic.replication.factor=1
transaction.state.log.replication.factor=1
transaction.state.log.min.isr=1

############################# Log Retention Policy #############################
# 日志保留时间（小时）
log.retention.hours={{ kafka_log_retention_hours }}

# 日志保留大小（字节，-1表示无限制）
log.retention.bytes={{ kafka_log_retention_bytes }}

# 日志分段大小
log.segment.bytes={{ kafka_log_segment_bytes }}

# 检查日志分段的间隔时间（毫秒）
log.retention.check.interval.ms=300000

############################# Zookeeper #############################
# ZooKeeper 连接字符串
zookeeper.connect=localhost:{{ kafka_zookeeper_port }}

# ZooKeeper 连接超时时间（毫秒）
zookeeper.connection.timeout.ms=18000

############################# Group Coordinator Settings #############################
# 组协调器设置
group.initial.rebalance.delay.ms=0
